
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Payment Stats - Money Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body align="center">
  <h1>Payments Statistics</h1>

  <% if @stats.empty? %>
    <p>You don't have payments done in this period</p>
  <% else %>
  	<div id="canvas">
      <canvas id="myChart"></canvas>
    </div>
	    
	<script src="javascripts/chart/Chart.js"></script>
	<script src="javascripts/chart/data-chart.js"></script>
	<script>data = setGetData(<%=@dates%>, <%=@data%>)</script>
	<script src="javascripts/chart/view-chart.js"></script>    
	    
  	<br>
  
	<table align="center" border="1">
	  <tr>
	    <th>Spending Name</th>
	    <th>Amount</th>
	    <th>Date</th>
	
	    <% @stats.each do |s| %>
	      <tr>
	        <td><%= s.get_name %></td>
	        <td><%="$#{s.amount}"%></td>
	        <td><%= s.pay_date.to_date %></td>
	        <!-- <td><#%= link_to 'Remove', pay, :confirm => 'Are you sure?', :method => :delete %></td> -->
	      </tr>
	    <% end %>
	    
	  </tr>
	</table>
	
	<p>Total: $<%= @total %></p>
  <% end %>

  <form action="coming_expirations" method="get">
    <input type="submit" value="Return" class="btn" id="returnButton" />
  </form>
  
  <form action="payments_stats" method="get" id="stats">
  	<p>View how many payments I did in a given period of time</p>
  	From date <input type="date" id="from_date" name="from_date" />
  	To date <input type="date" id="to_date" name="to_date" />
    <input type="submit" value="View stats" id="viewPaymentsStatsButton" />
  </form>

</body>
</html>

